{
  "version": 3,
  "sources": [
    "web/src/app/ui/kmwuibutton.ts"
  ],
  "sourceRoot": "https://s.keyman.com/kmw/engine/17.0.155/src",
  "sourcesContent": [
    "/***\r\n   KeymanWeb 17.0\r\n   Copyright 2019-2023 SIL International\r\n***/\r\n\r\nimport type { KeymanEngine, KeyboardCookie, UIModule } from 'keyman/app/browser';\r\nimport type { FloatingOSKViewCookie } from 'keyman/engine/osk';\r\n\r\ndeclare var keyman: KeymanEngine\r\n\r\nif(!keyman?.ui?.name) {\r\n\r\n  /********************************/\r\n  /*                              */\r\n  /* Button User Interface Code   */\r\n  /*                              */\r\n  /********************************/\r\n\r\n  /**\r\n   * Do not enclose in an anonymous function, as the compiler may create\r\n   * global scope variables to replace true, false, null, whcih can then collide\r\n   * with other variables.\r\n   * Instead, use the --output-wrapper command during optimization, which will\r\n   * add the anonymous function to enclose all code, including those optimized\r\n   * variables which would otherwise have global scope.\r\n   **/\r\n\r\n  try {\r\n    // Declare KeymanWeb, OnScreen keyboard and Util objects\r\n    const keymanweb = keyman;\r\n    const util=keymanweb.util;\r\n    // var dbg=keymanweb['debug'];\r\n\r\n    // Disable UI for touch devices\r\n    if(util.isTouchDevice()) {\r\n      throw '';\r\n    }\r\n\r\n    class UIButton implements UIModule {\r\n      // User interface global and variables\r\n      readonly name = 'button';\r\n\r\n      init = false;\r\n\r\n      /**\r\n       * Initialization timeout handle.\r\n       */\r\n      private initTimer: number = null;\r\n      private keyboardSelector = null; // not referenced\r\n\r\n      // not referenced\r\n      private KeymanWeb_DefaultKeyboardHelp='<span style=\"font-size:7.5pt\">KeymanWeb is not running.  Choose a keyboard from the list</span>';\r\n\r\n\r\n      private _KeymanWeb_KbdList: HTMLUListElement = null;\r\n\r\n      /**\r\n       * Tracks the element corresponding to the active keyboard on the keyboard list.\r\n       *\r\n       * Is also set when activating it due to user interaction.\r\n       */\r\n      private _KMWSel: HTMLElement = null;\r\n      private _IsHelpVisible = false;\r\n      private _DefaultKeyboardID = '';\r\n\r\n      updateTimer: number = 0;\r\n      updateList = true;\r\n\r\n      /**\r\n       * If no id == 'KeymanWebControl' element exists during init, this UI module\r\n       * will make its own, auto-insert it, and track the element here.\r\n       */\r\n      private _insertedElem: HTMLElement = null;\r\n\r\n      /**\r\n       * Highlight the currently active keyboard in the list of keyboards\r\n       **/\r\n      private _ShowSelected() {\r\n        let kbd=keymanweb.getActiveKeyboard();\r\n        let lgc=keymanweb.getActiveLanguage();\r\n        let kList = this._KeymanWeb_KbdList.childNodes;\r\n        let _r = /^KMWSel_(.*)\\$(.*)$/;\r\n\r\n        for(let i=1; i<kList.length; i++) {\r\n          (kList[i].childNodes[0] as HTMLElement).className = '';\r\n        }\r\n\r\n        let i: number;\r\n        for(i=2; i<kList.length; i++) {\r\n          let _rv = _r.exec((kList[i].childNodes[0] as HTMLElement).id);\r\n          if(_rv && (_rv[1] == kbd) && (_rv[2] == lgc)) {\r\n            break;\r\n          }\r\n        }\r\n        if(i >= kList.length) {\r\n          i=1;\r\n        }\r\n        (kList[i].childNodes[0] as HTMLElement).className = 'selected';\r\n      }\r\n\r\n      /**\r\n       * Select keyboard by id\r\n       *\r\n       * @param       {Event}  _id   keyboard selection event\r\n       * @return      {boolean}\r\n       */\r\n      readonly _SelectKeyboard = (_id: Event) => {\r\n        let id: string = '';\r\n        if(typeof(_id) == 'object') {\r\n          let t: HTMLElement = null;\r\n          if((typeof(_id.target) != 'undefined') && _id.target) {\r\n            t=_id.target as HTMLElement;\r\n          } else if((typeof(_id.srcElement) != 'undefined') && _id.srcElement) {\r\n            t=_id.srcElement as HTMLElement;\r\n          }\r\n\r\n          if(t) {\r\n            id=t.id;\r\n          }\r\n        }\r\n\r\n        let _r=/^KMWSel_(.*)\\$(.*)$/;\r\n        let _rv=_r.exec(id),_lgc='',_name='';\r\n        if(_rv !== null) {\r\n          _name = _rv[1].split('$')[0]; //new code\r\n          _lgc = id.split('$')[1];\r\n          if(this._KMWSel != null) {\r\n            this._KMWSel.className = '';\r\n          }\r\n          let _k = document.getElementById(id);\r\n          if(_k) {\r\n            _k.className='selected';\r\n          }\r\n          this._KMWSel = _k;\r\n          keymanweb.setActiveKeyboard(_name,_lgc);\r\n        } else {\r\n          _name=null;\r\n        }\r\n\r\n        keymanweb.focusLastActiveElement();\r\n        let osk = keymanweb.osk;\r\n        if(osk && osk.isEnabled()) {\r\n          osk.show(true);\r\n        }\r\n\r\n        this._ShowKeyboardButton(_name);\r\n        return false;\r\n      }\r\n\r\n      /**\r\n       * Set KMW UI activation state on mouse click\r\n       *\r\n       * @param       {Event}    e     event\r\n       */\r\n      readonly _SelectorMouseDown = (e: MouseEvent) => {\r\n        const x=keymanweb.getLastActiveElement();\r\n\r\n        // Set the focus to an input field, to get correct OSK display behaviour\r\n        if(!x) {\r\n          this._FocusFirstInput();\r\n        } else {\r\n          keymanweb.focusLastActiveElement();\r\n        }\r\n\r\n        if(keymanweb.activatingUI) {\r\n          keymanweb.activatingUI(1);\r\n        }\r\n      }\r\n\r\n      /**\r\n       * Set focus on mouse up\r\n       *\r\n       * @param       {Event}    e     event\r\n       */\r\n      readonly _SelectorMouseUp = (e: MouseEvent) => {\r\n        const x=keymanweb.getLastActiveElement();\r\n\r\n        // Set the focus to an input field, to get correct OSK display behaviour\r\n        if(!x) {\r\n          this._FocusFirstInput();\r\n        } else {\r\n          keymanweb.focusLastActiveElement();\r\n        }\r\n      }\r\n\r\n      /**\r\n       * Set KMW UI activation state on mouse over\r\n       *\r\n       * @param       {Event}   e     event\r\n       */\r\n      readonly _SelectorMouseOver = (e: MouseEvent) => {\r\n        // highlight the currently active keyboard\r\n        this._ShowSelected();\r\n\r\n        if(keymanweb.activatingUI) {\r\n          keymanweb.activatingUI(1);\r\n        }\r\n\r\n        document.getElementById(\"kmwico_li\").className=\"sfhover\";\r\n\r\n        // Conditionally display keyboard button\r\n        this._ShowKeyboardButton();\r\n      }\r\n\r\n      /**\r\n       * Sets the focus to the first input or textarea found on the current page\r\n       * to ensure consistent keyboard selection and OSK display behaviour\r\n       */\r\n      private _FocusFirstInput() {\r\n        let ip: HTMLInputElement = null;\r\n        let tp: HTMLTextAreaElement = null;\r\n        const iList=document.getElementsByTagName(\"input\");\r\n        const tList=document.getElementsByTagName(\"textarea\");\r\n\r\n        let i: number;\r\n        for(i=0; i<iList.length; i++) {\r\n          if(iList[i].type == 'text') {\r\n            break;\r\n          }\r\n        }\r\n\r\n        if(i < iList.length) {\r\n          ip=iList[i];\r\n        }\r\n\r\n        if(tList.length > 0) {\r\n          tp = tList[0];\r\n        }\r\n\r\n        if((!ip) && (!tp)) {\r\n          return;\r\n        } else if(ip && !tp) {\r\n          ip.focus();\r\n        } else if(tp && !ip) {\r\n          tp.focus();\r\n        } else if(ip.offsetTop < tp.offsetTop) {\r\n          ip.focus();\r\n        } else if(ip.offsetTop > tp.offsetTop) {\r\n          tp.focus();\r\n        } else if(ip.offsetLeft < tp.offsetLeft) {\r\n          ip.focus();\r\n        } else {\r\n          tp.focus();\r\n        }\r\n      }\r\n\r\n      /**\r\n       * Clear KMW UI activation state on mouse out\r\n       *\r\n       * @param       {Event}    e     event\r\n       */\r\n      readonly _SelectorMouseOut = (e: MouseEvent) => {\r\n        if(keymanweb.activatingUI) {\r\n          keymanweb.activatingUI(0);\r\n        }\r\n        document.getElementById(\"kmwico_li\").className=\"sfunhover\";\r\n      }\r\n\r\n      /**\r\n       * Disable the button to show/hide the OSK if no active keyboard or active keyboard is CJK (user cannot hide)\r\n       *\r\n       * @param       {?string=}  _name     current keyboard name\r\n       */\r\n      private _ShowKeyboardButton(_name?: string) {\r\n        let kbdName = keymanweb.getActiveKeyboard();\r\n        let kbdId = document.getElementById(\"KMW_Keyboard\");\r\n        if(arguments.length > 0) {\r\n          kbdName = _name;\r\n        }\r\n\r\n        if(kbdId) {\r\n          if((kbdName == '') || keymanweb.isCJK()) {\r\n            kbdId.className='kmw_disabled';\r\n          } else {\r\n            let osk = keymanweb.osk;\r\n            kbdId.className = osk && osk.isEnabled() ? 'kmw_show' : 'kmw_hide';\r\n          }\r\n        }\r\n      }\r\n\r\n      registerEvents() {\r\n        let osk = keymanweb.osk;\r\n        if(!osk) {\r\n          return;\r\n        }\r\n        /**\r\n         * UI Functions called by KeymanWeb or OSK\r\n         */\r\n        osk.addEventListener('show', (oskPosition) => {\r\n          const t=keymanweb.getLastActiveElement();\r\n          if(t) {\r\n            if(!oskPosition['userLocated']) {\r\n              oskPosition['x'] = util.getAbsoluteX(t);\r\n              oskPosition['y'] = util.getAbsoluteY(t)+t.offsetHeight;\r\n            }\r\n          }\r\n\r\n          this._ShowKeyboardButton();\r\n          return oskPosition;\r\n        });\r\n\r\n        /* TODO: why is this still needed??? Does it actually do anything?? */\r\n        osk.addEventListener('hide', function(obj) {\r\n          if((arguments.length > 0) && obj['hiddenByUser']) {\r\n            let _a = document.getElementById('KMW_Keyboard');\r\n            if(_a) {\r\n              _a.className = 'kmw_hide';\r\n            }\r\n          }\r\n        });\r\n      }\r\n\r\n      /**\r\n       * Show or hide the OSK (always visible for CJK keyboards)\r\n       *\r\n       * @param       {Object}    _anchor     anchor element (?)\r\n       * @return      {boolean}\r\n       **/\r\n      readonly _ShowKeymanWebKeyboard = () => {\r\n        const kbdId=document.getElementById(\"KMW_Keyboard\");\r\n        let osk = keymanweb.osk;\r\n\r\n        if((kbdId.className!='kmw_disabled') && osk && osk.show) {\r\n          if(osk.isEnabled()) {\r\n            osk.hide();\r\n          } else {\r\n            osk.show(true);\r\n          }\r\n        }\r\n        if(window.event) {\r\n          window.event.returnValue=false;\r\n        }\r\n\r\n        keymanweb.focusLastActiveElement();\r\n        return false;\r\n      }\r\n\r\n      /**\r\n       * Initialize Button User Interface\r\n       **/\r\n      readonly initialize = () => {\r\n        if(this.initTimer) {\r\n          window.clearTimeout(this.initTimer);\r\n          this.initTimer = null;\r\n        }\r\n\r\n        //Never initialize UI before KMW (parameters will be undefined)\r\n        if(!keymanweb.initialized) {\r\n          this.initTimer = window.setTimeout(this.initialize, 50);\r\n          return;\r\n        }\r\n\r\n        if(this.init || util.isTouchDevice()) {\r\n          return;\r\n        }\r\n\r\n        this.init = true;\r\n\r\n        util.addStyleSheet(this._Appearance);\r\n\r\n        this._KeymanWeb_KbdList = util.createElement('ul');\r\n        this._KeymanWeb_KbdList.id = 'KeymanWeb_KbdList';\r\n\r\n        let _elem = document.getElementById('KeymanWebControl');\r\n        if(!_elem) {\r\n          const _elems = document.getElementsByTagName('div');\r\n          for(let _i = 0; _i < _elems.length; _i++) {\r\n            if(_elems[_i].className == 'KeymanWebControl') {\r\n              _elem = _elems[_i]; {\r\n                break;\r\n              }\r\n            }\r\n          }\r\n        }\r\n\r\n        // Insert as first child of body if not defined by user\r\n        if(!_elem && (document.body != null)) {\r\n          _elem=document.createElement('DIV');\r\n          _elem.id='KeymanWebControl';\r\n          document.body.insertBefore(_elem,document.body.firstChild);\r\n          this._insertedElem = _elem;\r\n        }\r\n\r\n\r\n        let imgPath=util.getOption('resources')+'ui/button/';\r\n        if(_elem) {\r\n          // Append another DIV to follow the main control with clear:both to prevent selection over entire width of window\r\n          const dx=document.createElement('DIV')\r\n          const ds=dx.style;\r\n          ds.clear='both';\r\n          _elem.parentNode.insertBefore(dx,_elem.nextSibling);\r\n\r\n          const _btn=util.createElement('img');\r\n          const _ul=util.createElement('ul');\r\n          const _li0=util.createElement('li');\r\n\r\n          _btn.id = 'kmwico_a';\r\n          _btn.src = imgPath+'kmw_button.gif';\r\n          _btn.onclick = function() {\r\n            return false;\r\n          }  //may want to use this in iOS *****\r\n          _li0.appendChild(_btn);\r\n          _li0.id = 'kmwico_li';\r\n          _ul.appendChild(_li0);\r\n          _ul.id = 'kmwico';\r\n          _ul.style.display = 'block';\r\n          _elem.appendChild(_ul);\r\n        } else {\r\n          // Do not define any UI behaviour if no controller element can be found\r\n          return;\r\n        }\r\n\r\n        // ... wait, what?  I can't find any evidence of this reference point existing.\r\n        // Even tag `release-web-stable-2.0` turns up results only for this specific sourcefile.\r\n        // Thus, in essence:  if(true) { /* ... */ }\r\n        if(!keymanweb['iOS']) {\r\n          var _li = util.createElement('li');\r\n          var _a = util.createElement('a');\r\n          var _img = util.createElement('img');\r\n          _img.src = imgPath+'kbdicon.gif';\r\n          _a.appendChild(_img);\r\n\r\n          const _txt1 = document.createTextNode(' Hide Keyboard');\r\n          const _txt2 = document.createTextNode(' Show Keyboard');\r\n          const _sp1 = util.createElement('span');\r\n          _sp1.id = 'KMW_KbdVisibleMsg';\r\n          _sp1.appendChild(_txt1);\r\n          _a.appendChild(_sp1);\r\n\r\n          var _sp2 = util.createElement('span');\r\n          _sp2.id = 'KMW_KbdHiddenMsg';\r\n          _sp2.appendChild(_txt2);\r\n          _a.appendChild(_sp2);\r\n          _a.onmousedown = this._ShowKeymanWebKeyboard;\r\n          _a.href = '#';\r\n          _a.id = 'KMW_Keyboard';\r\n          _li.id = 'KMW_ButtonUI_KbdIcon';\r\n          _li.appendChild(_a);\r\n          this._KMWSel = _a;\r\n          this._KeymanWeb_KbdList.appendChild(_li);\r\n        }\r\n\r\n        var _li1 = util.createElement('li');\r\n        _li1.id = 'KMW_ButtonUI_KbdList';\r\n        var _a1 = util.createElement('a');\r\n        _a1.appendChild(document.createTextNode('(System keyboard)'));\r\n\r\n        _a1.onclick = this._SelectKeyboard;\r\n        _a1.href = '#';\r\n        _a1.id='KMWSel_$';\r\n        _a1.className='selected';\r\n        _li1.appendChild(_a1);\r\n        this._KMWSel = _a1;\r\n        this._KeymanWeb_KbdList.appendChild(_li1);\r\n\r\n        this.updateKeyboardList();\r\n\r\n        document.getElementById('kmwico_li').appendChild(this._KeymanWeb_KbdList);\r\n\r\n        var _sfEl = document.getElementById(\"kmwico_li\");\r\n        util.attachDOMEvent(_sfEl,'mousedown',this._SelectorMouseDown);\r\n        util.attachDOMEvent(_sfEl,'mouseover',this._SelectorMouseOver);\r\n        util.attachDOMEvent(_sfEl,'mouseout',this._SelectorMouseOut);\r\n        util.attachDOMEvent(_sfEl,'mouseup',this._SelectorMouseUp);\r\n\r\n        this.registerEvents();\r\n        keymanweb.focusLastActiveElement();  \t//TODO: this needs to be extended - if no element is active, try and identify an enabled input element\r\n      }\r\n\r\n      shutdown() {\r\n        const root = this._insertedElem;\r\n        if(root) {\r\n          root.parentNode.removeChild(root);\r\n        }\r\n      }\r\n\r\n      /**\r\n       * Update the entire menu when keyboards are registered or deregistered\r\n       **/\r\n      readonly updateKeyboardList = () => {\r\n        this.updateList = false;\r\n\r\n        if(!this.init) {\r\n          return;\r\n        }\r\n\r\n        // Clear existing list first (first two nodes must be preserved)\r\n        for(let i = this._KeymanWeb_KbdList.childNodes.length; i>2; i--) {\r\n          this._KeymanWeb_KbdList.removeChild(this._KeymanWeb_KbdList.childNodes[i-1]);\r\n        }\r\n\r\n        const kbds=keymanweb.getKeyboards();\r\n        if(kbds.length > 0) {\r\n          for(var i:number=0; i<kbds.length; i++) {\r\n            this.registerKeyboard(\r\n              kbds[i].InternalName,\r\n              kbds[i].LanguageName,\r\n              kbds[i].Name,\r\n              kbds[i].LanguageCode\r\n            );\r\n          }\r\n        }\r\n      }\r\n\r\n      /**\r\n       * As each keyboard stub is registered, append it to the list\r\n       *\r\n       * @param       {string}    Lki     internal name\r\n       * @param       {string}    Lkl     language name\r\n       * @param       {string}    Lkn     keyboard name\r\n       * @param       {string}    Lklc    language code\r\n       **/\r\n      registerKeyboard(\r\n        Lki: string,\r\n        Lkl: string,\r\n        Lkn: string,\r\n        Lklc: string\r\n      ) {\r\n        const _li2 = util.createElement('li');\r\n        const _a2 = util.createElement('a');\r\n        let _t = Lkn.replace(/\\s?keyboard/i,'');\r\n\r\n        if(Lkl) {\r\n          var lg=Lkl.split(',')[0];\r\n          if(Lkn.search(lg) == -1) {\r\n            _t = lg+' ('+_t+')';\r\n          }\r\n        }\r\n        if(_t.length > 26) {\r\n          _t=_t.substr(0,24)+'\\u2026';\r\n        }\r\n        _a2.appendChild(document.createTextNode(_t));\r\n        _a2.onclick = this._SelectKeyboard;\r\n        _a2.href = '#';\r\n        _a2.id='KMWSel_'+Lki+'$'+Lklc;\r\n        _li2.appendChild(_a2);\r\n        this._KeymanWeb_KbdList.appendChild(_li2);\r\n      }\r\n\r\n      // Define appearance of this interface\r\n      private _Appearance = `\r\n#kmwico, #kmwkbd {\r\n  vertical-align: middle;\r\n}\r\n\r\n#KeymanWebControl {\r\n  float:left;\r\n}\r\n\r\n#KeymanWebControl * {\r\n  letter-spacing: 0px !important;\r\n  line-height: 1li !important;\r\n  white-space: nowrap !important;\r\n}\r\n\r\n#KeymanWebControl #kmwico img {\r\n  vertical-align: top;\r\n  padding: 0;\r\n  margin: 0;\r\n  border: none;\r\n}\r\n\r\n#KeymanWebControl #kmwico, #kmwico ul {\r\n  padding: 0;\r\n  margin: 0;\r\n  list-style: none;\r\n}\r\n\r\n#KeymanWebControl #kmwico_a {\r\n  display: block;\r\n  /* border: none !important; */\r\n  width: 22px; height: 23px;                                 /* sizes needed for kmw_button.gif */\r\n}\r\n\r\n#KeymanWebControl #kmwico li {\r\n  text-align: left;\r\n}\r\n\r\n#KeymanWebControl #kmwico li ul {\r\n  display: block;\r\n  position: absolute;\r\n  left: -5999px;\r\n  border: solid 2px #ad4a28;\r\n  background: white;\r\n  border-radius: 4px;\r\n  box-shadow: 4px 4px 2px #666;\r\n  z-index: 10011; /* above the osk */\r\n}\r\n\r\n#KeymanWebControl #kmwico li.sfunhover ul {\r\n  display: none; left: -5999px;\r\n}\r\n\r\n#KeymanWebControl #kmwico li:hover ul, #kmwico li.sfhover ul {\r\n  display: block;\r\n  left: auto;\r\n}\r\n\r\n#KeymanWebControl #kmwico ul li {\r\n  float: none;\r\n  padding: 0 !important;\r\n  margin: 0 !important;\r\n  width: 136px !important;\r\n}\r\n\r\n#KeymanWebControl #KMW_LanguageName {\r\n  font-weight: bold;\r\n}\r\n\r\n#KeymanWebControl #kmwico ul li a, #kmwico ul li a:visited {\r\n  display: block;\r\n  padding: 2px 4px !important;\r\n  border: none !important;\r\n  /* width: auto; */\r\n  color: #404040;\r\n  font-family: Tahoma,Verdana,Arial,sans-serif;\r\n  font-size: 8pt;\r\n  text-decoration: none;\r\n}\r\n\r\n#KeymanWebControl #kmwico ul li a.selected {\r\n  font-weight: bold;\r\n  color: black;\r\n}\r\n\r\n#KeymanWebControl #kmwico ul li a:hover {\r\n  color: white;\r\n  background-color: #ad4a28;\r\n}\r\n\r\n#KeymanWebControl #kmwico ul li a.kmw_disabled, #KeymanWebControl #kmwico ul li a.kmw_disabled:hover {\r\n  color: #c0c0c0; cursor: default;\r\n  background-color: white;\r\n}\r\n\r\n#KeymanWebControl #kmwico ul li a.kmw_show span#KMW_KbdHiddenMsg, #KeymanWebControl #kmwico ul li a.kmw_disabled span#KMW_KbdVisibleMsg {\r\n  display: none;\r\n}\r\n\r\n#KeymanWebControl #kmwico ul li a.kmw_show span#KMW_KbdVisibleMsg {\r\n  display: inline;\r\n}\r\n\r\n#KeymanWebControl #kmwico ul li a.kmw_hide span#KMW_KbdHiddenMsg {\r\n  display: inline;\r\n}\r\n\r\n#KeymanWebControl #kmwico ul li a.kmw_hide span#KMW_KbdVisibleMsg {\r\n  display: none;\r\n}\r\n\r\n#KeymanWebControl #kmwico ul li#KMW_ButtonUI_KbdIcon {\r\n  border-bottom: solid 1px #ad4a28;\r\n}\r\n`\r\n    }\r\n\r\n    const ui = keymanweb.ui = new UIButton();\r\n\r\n    /**\r\n     * Keyboard registration event handler\r\n     *\r\n     * Set a timer to update the UI keyboard list on timeout after each keyboard is registered,\r\n     * thus updating only once when only if multiple keyboards are registered together\r\n     */\r\n    keymanweb.addEventListener('keyboardregistered', function(p) {\r\n      ui.updateList = true;\r\n      if(ui.updateTimer) {\r\n        clearTimeout(ui.updateTimer);\r\n      }\r\n      ui.updateTimer = window.setTimeout(ui.updateKeyboardList, 20);\r\n    });\r\n\r\n    // but also call initialization when script loaded, which is after KMW initialization for asynchronous script loading\r\n    ui.initialize();\r\n  } catch(err){}\r\n}"
  ],
  "mappings": "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",
  "names": [
    "_b",
    "keymanweb_1",
    "util_1",
    "UIButton",
    "_this",
    "_id",
    "id",
    "t",
    "_r",
    "_rv",
    "_lgc",
    "_name",
    "_k",
    "osk",
    "e",
    "x",
    "kbdId",
    "_elem",
    "_elems",
    "_i",
    "imgPath",
    "dx",
    "ds",
    "_btn",
    "_ul",
    "_li0",
    "_li",
    "_a",
    "_img",
    "_txt1",
    "_txt2",
    "_sp1",
    "_sp2",
    "_li1",
    "_a1",
    "_sfEl",
    "i_1",
    "kbds",
    "kbd",
    "lgc",
    "kList",
    "i_2",
    "i",
    "ip",
    "tp",
    "iList",
    "tList",
    "kbdName",
    "oskPosition",
    "obj",
    "root",
    "Lki",
    "Lkl",
    "Lkn",
    "Lklc",
    "_li2",
    "_a2",
    "_t",
    "lg",
    "ui_1",
    "p",
    "err"
  ]
}