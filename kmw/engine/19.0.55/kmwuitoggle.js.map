{
  "version": 3,
  "sources": [
    "node_modules/tslib/tslib.es6.js",
    "web/src/app/ui/kmwuitoggle.ts"
  ],
  "sourceRoot": "https://s.keyman.com/kmw/engine/19.0.55/src",
  "sourcesContent": [
    "/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __esDecorate(ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\r\n    function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\r\n    var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\r\n    var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\r\n    var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\r\n    var _, done = false;\r\n    for (var i = decorators.length - 1; i >= 0; i--) {\r\n        var context = {};\r\n        for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\r\n        for (var p in contextIn.access) context.access[p] = contextIn.access[p];\r\n        context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\r\n        var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\r\n        if (kind === \"accessor\") {\r\n            if (result === void 0) continue;\r\n            if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\r\n            if (_ = accept(result.get)) descriptor.get = _;\r\n            if (_ = accept(result.set)) descriptor.set = _;\r\n            if (_ = accept(result.init)) initializers.unshift(_);\r\n        }\r\n        else if (_ = accept(result)) {\r\n            if (kind === \"field\") initializers.unshift(_);\r\n            else descriptor[key] = _;\r\n        }\r\n    }\r\n    if (target) Object.defineProperty(target, contextIn.name, descriptor);\r\n    done = true;\r\n};\r\n\r\nexport function __runInitializers(thisArg, initializers, value) {\r\n    var useValue = arguments.length > 2;\r\n    for (var i = 0; i < initializers.length; i++) {\r\n        value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\r\n    }\r\n    return useValue ? value : void 0;\r\n};\r\n\r\nexport function __propKey(x) {\r\n    return typeof x === \"symbol\" ? x : \"\".concat(x);\r\n};\r\n\r\nexport function __setFunctionName(f, name, prefix) {\r\n    if (typeof name === \"symbol\") name = name.description ? \"[\".concat(name.description, \"]\") : \"\";\r\n    return Object.defineProperty(f, \"name\", { configurable: true, value: prefix ? \"\".concat(prefix, \" \", name) : name });\r\n};\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n        desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: false } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n\r\nexport function __classPrivateFieldIn(state, receiver) {\r\n    if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\r\n    return typeof state === \"function\" ? receiver === state : state.has(receiver);\r\n}\r\n\r\nexport default {\r\n    __extends,\r\n    __assign,\r\n    __rest,\r\n    __decorate,\r\n    __param,\r\n    __metadata,\r\n    __awaiter,\r\n    __generator,\r\n    __createBinding,\r\n    __exportStar,\r\n    __values,\r\n    __read,\r\n    __spread,\r\n    __spreadArrays,\r\n    __spreadArray,\r\n    __await,\r\n    __asyncGenerator,\r\n    __asyncDelegator,\r\n    __asyncValues,\r\n    __makeTemplateObject,\r\n    __importStar,\r\n    __importDefault,\r\n    __classPrivateFieldGet,\r\n    __classPrivateFieldSet,\r\n    __classPrivateFieldIn,\r\n};\r\n",
    "/***\r\n   KeymanWeb 17.0\r\n   Copyright 2019-2023 SIL International\r\n***/\r\n\r\nimport type { KeymanEngine, KeyboardCookie, UIModule } from 'keyman/app/browser';\r\nimport type { FloatingOSKViewCookie } from 'keyman/engine/osk';\r\n\r\ndeclare global {\r\n  interface Window {\r\n    keyman: KeymanEngine\r\n  }\r\n}\r\n\r\ntype KeyboardMenuEntry = {\r\n  _InternalName: string,\r\n  _LanguageCode: string,\r\n  _Index: number;\r\n}\r\n\r\ninterface Owned<T> {\r\n  _owningObject?: T;\r\n}\r\n\r\nconst keymanweb=window.keyman;\r\n\r\n// If a UI module has been loaded, we can rely on the publically-published 'name' property\r\n// having been set as a way to short-out a UI reload.  Its parent object always exists by\r\n// this point in the build process.\r\nif(!keymanweb) {\r\n  throw new Error(\"`keyman` global is missing; Keyman Engine for Web script has not been loaded\");\r\n} else if(!keymanweb.ui?.name) {\r\n  /********************************/\r\n  /*                              */\r\n  /* Toggle User Interface Code   */\r\n  /*                              */\r\n  /********************************/\r\n\r\n  /**\r\n   * Do not enclose in an anonymous function, as the compiler may create\r\n   * global scope variables to replace true, false, null, which may collide\r\n   * with other variables.\r\n   * Instead, use the --output-wrapper command during optimization, which will\r\n   * add the anonymous function to enclose all code, including those optimized\r\n   * variables which would otherwise have global scope.\r\n   **/\r\n\r\n  try {\r\n    // Declare KeymanWeb, OnScreen Keyboard and Util objects\r\n    //var dbg=keymanweb['debug'];\r\n    const util = keymanweb.util;\r\n\r\n    // Disable UI for touch devices\r\n    if(util.isTouchDevice()) {\r\n      throw '';\r\n    }\r\n\r\n    class ToggleUI implements UIModule {\r\n      // Initialize user interface common variables\r\n      readonly name = 'toggle';\r\n      initialized = false;\r\n\r\n      /**\r\n       * The top-level element of the Toggle UI module.\r\n       */\r\n      controller: HTMLDivElement = null;\r\n      oskButton: ReturnType<ToggleUI['button']> = null;  // inner class - Button, as defined within the .button method\r\n      kbdButton: ReturnType<ToggleUI['button']> = null;  // likewise.\r\n      controllerHovered = false;\r\n\r\n      keyboards: KeyboardMenuEntry[] = [];\r\n      /**\r\n       * The index of the previously-active keyboard in this UI module's language list.\r\n       */\r\n      lastActiveKeyboard = -1;\r\n\r\n      selectedMenuItem: HTMLAnchorElement = null;\r\n      updateList = true;\r\n\r\n      /**\r\n       * The numeric handle for an active window.setTimeout call.\r\n       */\r\n      updateTimer: number = null;\r\n\r\n      keyboardMenu: HTMLUListElement;\r\n\r\n      /**\r\n       * Update the KeymanWeb user interface when an input element is focused or blurred\r\n       *\r\n       * @param       {Object}            someElement     focused element\r\n       * @param       {(boolean|number)}  focusing        true if focusing\r\n       * @param       {Object}            activeControl   Object representing API specs for the control, if it exists and is now focused.\r\n       */\r\n      doFocus(someElement: HTMLElement, focusing: boolean | number, activeControl: HTMLElement) {\r\n        // This callback must be ignored until UI is initialized, or for touch devices (which can never initialize the UI)\r\n        if(!this.initialized) {\r\n          return;\r\n        }\r\n\r\n        // We don't want to shift the controller to something that's not an input element,\r\n        // but do want to account for window.event's data when legitimate.\r\n        if(window.event && keymanweb.isAttached(window.event.srcElement as HTMLElement)) {\r\n          someElement=window.event.srcElement as HTMLElement;\r\n        }\r\n\r\n        if(focusing) {\r\n          this.controller.style.display = 'block';\r\n        } else {\r\n          if(!(keymanweb.getUIState().activationPending) && !this.controllerHovered) {\r\n            this.controller.style.display = 'none';\r\n          }\r\n        }\r\n\r\n        /* I2406 - Find an appropriate position for the controller */\r\n        let w: number, h: number;\r\n\r\n        const p = util.getAbsolute(someElement);\r\n        let x = p.x;\r\n        let y = p.y;\r\n\r\n        const ownerDoc = someElement.ownerDocument;\r\n        if(ownerDoc.designMode == 'on' && ownerDoc.defaultView && ownerDoc.defaultView.frameElement) {\r\n          w = ownerDoc.defaultView.frameElement.clientWidth;\r\n          h = ownerDoc.defaultView.frameElement.clientHeight;\r\n        } else {\r\n          w = someElement.offsetWidth;\r\n          h = someElement.offsetHeight;\r\n        }\r\n\r\n        if(x + w > window.innerWidth + document.documentElement.scrollLeft - this.controller.offsetWidth - 1) {\r\n          y += h;\r\n        } else {\r\n          x += w + 2;\r\n          //y += h - ui.controller.offsetHeight - 1; // ui.controller.offsetheight is returned as its prior value, which results in incorrect UI positioning\r\n          // so better to set the offset absolutely JMD 11/2/11\r\n          y += h - 29; //prevent UI being positioned *above* the top of the element\r\n        }\r\n\r\n        if(isNaN(x) || isNaN(y)) {\r\n          return;\r\n        }\r\n\r\n        this.controller.style.left = x + 'px';\r\n        this.controller.style.top = y + 'px';\r\n      }\r\n\r\n      registerEvents() {\r\n        const osk = keymanweb.osk;\r\n\r\n        if(!osk) {\r\n          return;\r\n        }\r\n\r\n        osk.addEventListener('show', (oskPosition) => {\r\n            // Ensure that the ui.controller is visible if help is displayed\r\n            this.controller.style.display = 'block';\r\n            this.oskButton._setSelected(true);\r\n\r\n            return oskPosition;\r\n          });\r\n\r\n        osk.addEventListener('hide', (byUser) => {\r\n          if(byUser['HiddenByUser']) {\r\n            this.oskButton._setSelected(false);\r\n          }\r\n        });\r\n      };\r\n\r\n      /**\r\n       * Toggle the on screen keyboard display - KMW button control event\r\n       **/\r\n      readonly switchOsk = () => {\r\n        // Check that user control of OSK is allowed\r\n        if((keymanweb.getActiveKeyboard() == '') || keymanweb.isCJK()) {\r\n          return;\r\n        }\r\n\r\n        if(keymanweb.osk) {\r\n          const newState = !keymanweb.osk.isEnabled();\r\n          keymanweb.osk.show(newState);\r\n\r\n          // Also, indicate that the OSK is intentionally hidden.\r\n          this.oskButton._setSelected(newState);\r\n        }\r\n      }\r\n\r\n      /**\r\n       * Toggle a single keyboard on or off - KMW button control event\r\n       **/\r\n      readonly switchSingleKbd = async () => {\r\n        const _v = keymanweb.getActiveKeyboard() == '';\r\n        let nLastKbd=0, kbdName='', lgCode='';\r\n\r\n        if(_v) {\r\n          if(this.keyboards.length == 0) {\r\n            return;\r\n          }\r\n\r\n          if(this.lastActiveKeyboard < this.keyboards.length && this.lastActiveKeyboard >= 0) {\r\n            nLastKbd = this.lastActiveKeyboard;\r\n          }\r\n\r\n          kbdName = this.keyboards[nLastKbd]._InternalName;\r\n          lgCode = this.keyboards[nLastKbd]._LanguageCode;\r\n          await keymanweb.setActiveKeyboard(kbdName,lgCode);\r\n          this.lastActiveKeyboard = nLastKbd;\r\n        } else {\r\n          await keymanweb.setActiveKeyboard('');\r\n        }\r\n\r\n        if(this.kbdButton) {\r\n          this.kbdButton._setSelected(_v);\r\n        }\r\n      }\r\n\r\n      /**\r\n       * Switch to the next keyboard in the list - KMW button control event\r\n       **/\r\n      readonly switchNextKbd = async () => {\r\n        let _v = (keymanweb.getActiveKeyboard() == '');\r\n        let kbdName='', lgCode='';\r\n\r\n        if(_v) {\r\n          if(this.keyboards.length == 0) {\r\n            return;\r\n          }\r\n\r\n          kbdName = this.keyboards[0]._InternalName;\r\n          lgCode = this.keyboards[0]._LanguageCode;\r\n          await keymanweb.setActiveKeyboard(kbdName,lgCode);\r\n          this.lastActiveKeyboard = 0;\r\n        } else {\r\n          if(this.lastActiveKeyboard == this.keyboards.length-1) {\r\n            await keymanweb.setActiveKeyboard('');\r\n            _v = false;\r\n          } else {\r\n            kbdName = this.keyboards[++this.lastActiveKeyboard]._InternalName;\r\n            lgCode = this.keyboards[this.lastActiveKeyboard]._LanguageCode;\r\n            await keymanweb.setActiveKeyboard(kbdName,lgCode);\r\n            _v = true;\r\n          }\r\n        }\r\n\r\n        if(this.kbdButton) {\r\n          this.kbdButton._setSelected(_v);\r\n        }\r\n      }\r\n\r\n      /**\r\n       * Create a button object for KeymanWeb UI buttons\r\n       *\r\n       * @constructor\r\n       * @param       {string}    _src         Image source\r\n       * @param       {string}    _caption     Alt text\r\n       * @param       {boolean}   _selected\r\n       * @return      {Object}\r\n       *\r\n       * @suppress {suspiciousCode}  // Closure isn't smart enough to realize that _onmouseover\r\n       *                             // and the like are defined on individual instances later.\r\n       *                             // It thinks they're always null.\r\n       **/\r\n      button(_src: string, _caption: string, _selected: boolean) {\r\n        /**\r\n         * Only ui.controllerHovered is referenced here:  it'd be easy enough to toggle it via closure\r\n         * and extract this inner class into its own definition outside of `class ToggleUI`.\r\n         *\r\n         * This would also give the main class type inference for its related fields and their\r\n         * uses.\r\n         */\r\n        const ui = this;\r\n\r\n        class Button {\r\n          // Button event-state management fields\r\n          _onclick: () => void = null;\r\n          _onmouseover: () => void = null;\r\n          _onmouseout: () => void = null;\r\n          _down = false;\r\n          _over = false;\r\n          _selected: boolean;\r\n\r\n          /**\r\n           * The top-level element of the button.\r\n           */\r\n          _elem: HTMLDivElement & Owned<Button>;\r\n\r\n          getElem() {\r\n            return this._elem;\r\n          };\r\n\r\n          private __updatestyle() {\r\n            const ss=this._elem.style;\r\n            if(this._over) {\r\n              ss.margin = '0px';\r\n              if(this._selected) {\r\n                ss.border = 'solid 1px #ad4a28';\r\n                ss.background = '#dfb4b4';\r\n              }\r\n              else {\r\n                ss.border = 'solid 1px #dfb4b4';\r\n                ss.background = '#f3e5de';\r\n              }\r\n            } else if(this._selected) {\r\n              ss.background = '#f3e5de';\r\n              ss.margin = '0px';\r\n              ss.border = 'solid 1px #ad4a28';\r\n            } else {\r\n              ss.background = 'none';\r\n              ss.margin = '1px';\r\n              ss.border = 'none';\r\n            }\r\n          };\r\n\r\n          private __mouseover = () => {\r\n            ui.controllerHovered = true;\r\n            this._over = true;\r\n            if(this._onmouseover != null) {\r\n              this._onmouseover();\r\n            }\r\n            this.__updatestyle();\r\n          };\r\n\r\n          private __mouseout = () => {\r\n            ui.controllerHovered = false;\r\n            this._over = false;\r\n            if(this._onmouseout != null) {\r\n              this._onmouseout();\r\n            }\r\n            this.__updatestyle();\r\n          };\r\n\r\n          private __click = () => {\r\n            keymanweb.activatingUI(false); // Clear activating UI flag once click is acknowledged\r\n            if(this._onclick != null) {\r\n                return this._onclick();\r\n            }\r\n            return false;\r\n          };\r\n\r\n          private __mousedown = () => {\r\n            keymanweb.activatingUI(true);  // Set activating UI flag (to manage focus/blur) on any UI mouse down event\r\n            this._down = true;\r\n            this.__updatestyle();\r\n            return false;\r\n          };\r\n\r\n          private __mouseup = () => {\r\n            this._down = false;\r\n            this.__updatestyle();\r\n          };\r\n\r\n\r\n          _setSelected(_value: boolean) {\r\n            keymanweb.activatingUI(false); // Always clear activating UI flag after selecting UI\r\n            this._selected = _value;\r\n            this.__updatestyle();\r\n          };\r\n\r\n          _getSelected() {\r\n            return this._selected;\r\n          };\r\n\r\n          _getOver() {\r\n            return this._over;\r\n          };\r\n\r\n          _getDown() {\r\n            return this._down;\r\n          };\r\n\r\n          constructor(/* TODO: put wrapping method's params HERE instead upon class-extraction */) {\r\n            this._selected = _selected;\r\n\r\n            const imgPath=util.getOption('resources') + 'ui/toggle/';\r\n            const _elemImg = util.createElement('img') as HTMLImageElement & Owned<Button>;\r\n            this._elem = util.createElement('div');\r\n            this._elem['_owningObject'] = this;\r\n            _elemImg.style.display = 'block';\r\n            _elemImg.src = imgPath + _src;\r\n            _elemImg.id = 'KMW_Controller_Img';\r\n            this._elem.style.margin = '0px'; //display = 'inline';\r\n            this._elem.style.width = '24px';\r\n            this._elem.style.height = '24px';\r\n            this._elem.style.zIndex = '10002';\r\n            this._elem.style.lineHeight = '100%';\r\n            this._elem.style.cssFloat = 'left';\r\n\r\n            _elemImg.title = _caption;\r\n            _elemImg.alt = _caption;\r\n            this._elem.appendChild(_elemImg);\r\n            this._elem.onmouseover = this.__mouseover;\r\n            this._elem.onmouseout = this.__mouseout;\r\n            this._elem.onmousedown = this.__mousedown;\r\n            this._elem.onmouseup = this.__mouseup;\r\n            _elemImg['_owningObject'] = this;\r\n            _elemImg.onclick = this.__click;\r\n\r\n            this.__updatestyle();\r\n          }\r\n        }\r\n\r\n        return new Button();\r\n      };\r\n\r\n      /**\r\n       * Function     Initialize\r\n       * Scope        Private\r\n       * Description  Initialize Toggle User Interface\r\n       **/\r\n      initialize() {\r\n        //Never initialize before KMW!\r\n        if(!keymanweb.initialized || util.isTouchDevice()) {\r\n          return;\r\n        }\r\n\r\n        if(!this.initialized) { // I2403 - Allow toggle design to be loaded twice\r\n          this.controller = util.createElement('div');\r\n        } else {\r\n          this.controller.innerHTML = '';  // I2403 - Allow toggle design to be loaded twice\r\n        }\r\n\r\n        const imgPath = util.getOption('resources')+'ui/toggle/';\r\n        this.controller.style.background = 'url('+imgPath+'kmwcontroller2x.gif)';\r\n        this.controller.style.padding = '1px 2px';\r\n\r\n        // Create keyboard list and OSK control buttones, and set initial styles\r\n        const v1=util.loadCookie<KeyboardCookie>('KeymanWeb_Keyboard');\r\n        let kbdEnabledOnLoad=false;\r\n        if(typeof(v1.current) != 'undefined') {\r\n          kbdEnabledOnLoad = (v1.current.indexOf('---') < 0);\r\n        }\r\n\r\n        this.kbdButton = this.button('kmw_logo_16.gif', 'Use Web Keyboard', kbdEnabledOnLoad);\r\n        this.controller.appendChild(this.kbdButton.getElem());\r\n\r\n        const v2 = util.loadCookie<Required<FloatingOSKViewCookie>>('KeymanWeb_OnScreenKeyboard');\r\n        let oskEnabledOnLoad=true;\r\n        if(typeof(v2.visible) != 'undefined') {\r\n          oskEnabledOnLoad=(v2.visible == 1);\r\n        }\r\n\r\n        // Add keyboard icon\r\n        this.oskButton = this.button('kmw_osk_16.gif','Show On Screen Keyboard',oskEnabledOnLoad);\r\n        this.oskButton._onclick = this.switchOsk;\r\n        this.controller.appendChild(this.oskButton.getElem());\r\n\r\n        // Hide controller unless already initialized\r\n        if(!this.initialized) {\r\n          this.controller.style.display = 'none';\r\n        }\r\n        this.controller.style.zIndex = '10001';\r\n        this.controller.style.position = 'absolute';\r\n\r\n        // The following three lines prevent the UI from being positioned incorrectly when the page is resized,\r\n        // but don't fix the problem completely, as the kbd icon still moves.  probably need to insert a DIV\r\n        // between the button and the container, and make that DIV fixed height and overflow:hidden\r\n        //ui.controller.style.maxHeight = '26px';\r\n        //ui.oskButton.getElem().style.position = 'relative';\r\n        //ui.oskButton.getElem().style.overflow = 'hidden';\r\n\r\n        if(!this.initialized) { // I2403 - Allow toggle design to be loaded more than once if necessary\r\n          document.body.appendChild(this.controller);\r\n        }\r\n\r\n        // Set initialized true\r\n        this.initialized = true;  // I2403 - Allow toggle design to be loaded more than once if needed\r\n\r\n        // Then update the keyboard list if keyboards already loaded (i.e. in page script)\r\n        this.updateKeyboardList();\r\n        this.registerEvents();\r\n\r\n        // Future improvement:  have the UI modules track their own stylesheets as part of their\r\n        // element hierarchy.  engine/dom-utils has a spun-off StylesheetManager class that's\r\n        // perfect for this.\r\n        util.addStyleSheet(this.stylingCSS);\r\n      }\r\n\r\n      shutdown() {\r\n        const root = this.controller;\r\n\r\n        if(root) {\r\n          root.parentNode.removeChild(root);\r\n        }\r\n      }\r\n\r\n      /**\r\n       * Function     updateKeyboardList\r\n       * Scope        Private\r\n       * Description  Rebuild the UI and keyboard list\r\n       **/\r\n      readonly updateKeyboardList = () => {\r\n        if(!(keymanweb.initialized || this.initialized)) {\r\n          return; //TODO: may want to restart the timer??\r\n        }\r\n\r\n        this.updateList = false;\r\n\r\n        const _kbds=keymanweb.getKeyboards();\r\n        const imgPath=util.getOption('resources') +'ui/toggle/';\r\n\r\n        // Check the number of installed keyboards to determine whether or not we will have a dropdown\r\n        if(_kbds.length > 1) {\r\n          // Multiple keyboards (button)\r\n          const _kmw_ctrl_img=<HTMLImageElement> document.getElementById('KMW_Controller_Img');\r\n          _kmw_ctrl_img.src = imgPath+'kmw_logo_16_down.gif';\r\n          _kmw_ctrl_img.style.width = '100%';\r\n\r\n          this.controller.style.background = 'url('+imgPath+'kmwcontroller2x.gif)';\r\n\r\n          this.kbdButton.getElem().id = 'kmwico';\r\n          this.kbdButton.getElem().style.width = '36px';\r\n          this.kbdButton._onmouseover = () => {\r\n            this.keyboardMenu.className=\"sfhover\";\r\n          };\r\n          this.kbdButton._onmouseout = () => {\r\n              this.keyboardMenu.className=\"sfunhover\";\r\n          };\r\n          this.kbdButton._onclick = null;\r\n          this.createMenu();\r\n        }  else if(_kbds.length == 1) {\r\n          // Single keyboard (button)\r\n          const _kmw_ctrl_img=<HTMLImageElement> document.getElementById('KMW_Controller_Img')\r\n          _kmw_ctrl_img.src = imgPath+'kmw_logo_16.gif';\r\n\r\n          this.kbdButton.getElem().id = 'kmwico';\r\n          this.kbdButton.getElem().style.width = '24px';\r\n\r\n          const Lki=_kbds[0].InternalName;\r\n          const Lklc=_kbds[0].LanguageCode;\r\n          this.controller.style.background = 'url('+imgPath+'kmwcontroller2.gif)';\r\n          this.keyboards.push({_InternalName: Lki, _LanguageCode: Lklc, _Index: 0});\r\n          this.kbdButton._onclick = this.switchSingleKbd;\r\n          this.kbdButton._onmouseover = function() { };\r\n          this.kbdButton._onmouseout = function() { };\r\n\r\n          // We must reconstruct the ui.keyboards array, and this done by ui.createMenu.\r\n          this.createMenu();\r\n\r\n          // Must remove menu if keyboards have been removed leaving only a single keyboard\r\n          if(typeof(this.keyboardMenu) != 'undefined') {\r\n            delete this.keyboardMenu;\r\n          }\r\n        }\r\n\r\n        // Highlight the last active keyboard\r\n        const sk=keymanweb.getSavedKeyboard().split(':');\r\n        this.updateMenu(sk[0],sk[1]);\r\n      }\r\n\r\n      /* ----------------------------------------\r\n        Drop down menu\r\n        ---------------------------------------- */\r\n\r\n      //  var  _SelectedMenuItem;\r\n\r\n      /**\r\n       * Function     selecKbd\r\n       * Scope        Private\r\n       * @param       {number}  _kbd\r\n       * Description  Select a keyboard from the drop down menu\r\n       **/\r\n      private async selectKbd(_kbd: number): Promise<boolean> {\r\n        let _name,_lgCode;\r\n        if(_kbd < 0) {\r\n          _name = '';\r\n          _lgCode='';\r\n        } else {\r\n          _name = this.keyboards[_kbd]._InternalName;\r\n          _lgCode = this.keyboards[_kbd]._LanguageCode;\r\n        }\r\n\r\n        await keymanweb.setActiveKeyboard(_name,_lgCode);\r\n        keymanweb.focusLastActiveElement();\r\n        this.kbdButton._setSelected(_name != '');\r\n        if(_kbd >= 0) {\r\n          this.lastActiveKeyboard = _kbd;\r\n        }\r\n\r\n        return false;\r\n      };\r\n\r\n      /**\r\n       * Function     updateMenu\r\n       * Scope        Private\r\n       * @param       {string}    kbdName\r\n       * @param       {?string=}  lgCode\r\n       * Description  Updates the menu selection when a change is required\r\n       **/\r\n      updateMenu(kbdName: string, lgCode: string) {\r\n        let _k=document.getElementById('KMWSel_$');\r\n\r\n        for(let i=0; i < this.keyboards.length; i++) {\r\n          if(this.keyboards[i]._InternalName == kbdName && this.keyboards[i]._LanguageCode == lgCode) {\r\n            _k=document.getElementById('KMWSel_' + this.keyboards[i]._InternalName+'$' + this.keyboards[i]._Index);\r\n          }\r\n        }\r\n\r\n        if(_k) {\r\n          if(this.selectedMenuItem != null) {\r\n            this.selectedMenuItem.className='';\r\n          }\r\n          _k.className='selected';\r\n          // The keyboard's entry in the keyboard-list drop-down is an <a> element.\r\n          this.selectedMenuItem=_k as HTMLAnchorElement;\r\n        }\r\n\r\n        // Occurs for desktop form-factors when no keyboard (aka the sys default) is active.\r\n        if(!this.oskButton) {\r\n          return;\r\n        }\r\n\r\n        // Hide the OSK button for CJK keyboards (or non-mapped)\r\n        if(lgCode=='cmn' || lgCode=='jpn' || lgCode=='kor') {\r\n          this.oskButton.getElem().style.display='none';\r\n          //osk['show'](true);\r\n        } else if(kbdName == '') {\r\n          this.oskButton.getElem().style.display='none';\r\n        } else {\r\n          this.oskButton.getElem().style.display='block';\r\n          //osk['show'](osk['isEnabled']());\r\n        }\r\n      }\r\n\r\n      get stylingCSS() {\r\n        return `\r\n#KeymanWeb_KbdList {\r\n  display: block;\r\n  position: absolute;\r\n  width: auto;\r\n  line-height: 100%;\r\n  margin: 0;\r\n  clear: both;\r\n  float: none;\r\n  top: auto;\r\n  border: solid 2px #ad4a28;\r\n  -moz-border-radius: 4px;\r\n  -webkit-border-radius: 4px;\r\n  border-radius: 4px;\r\n  box-shadow: 4px 4px 2px rgba(136,136,136,.5);\r\n  -webkit-box-shadow: 4px 4px 2px rgba(136,136,136,.5);\r\n  -moz-box-shadow: 4px 4px 2px rgba(136,136,136,.5);\r\n  list-style: none;\r\n  padding: 0;\r\n  background: white;\r\n  max-height: 300px;\r\n  overflow-y: scroll;\r\n  overflow-x: hidden;\r\n  white-space: nowrap;\r\n  z-index: 10001; /* above the osk */\r\n}\r\n\r\n.sfunhover#KeymanWeb_KbdList {\r\n  display: none; left: -999px;\r\n}\r\n\r\n.sfhover#KeymanWeb_KbdList {\r\n  display: block;\r\n  left: auto;\r\n}\r\n\r\n#KeymanWeb_KbdList li {\r\n  float: none;\r\n  width: auto;\r\n  padding: 0;\r\n  margin: 0;\r\n  text-align: left;\r\n}\r\n\r\n#KeymanWeb_KbdList li a {\r\n  display: block;\r\n  padding: 2px 4px;\r\n  color: #404040;\r\n  font-family: Tahoma,Verdana,Arial,sans-serif;\r\n  font-size: 8pt;\r\n  text-decoration: none;\r\n}\r\n\r\n#KeymanWeb_KbdList li a.selected {\r\n  font-weight: bold;\r\n  color: black;\r\n}\r\n\r\n#KeymanWeb_KbdList li a:hover {\r\n  color: white;\r\n  background-color: #ad4a28;\r\n  text-decoration: underline;\r\n}\r\n`;\r\n      }\r\n\r\n      /**\r\n       * Function     createMenu\r\n       * Scope        Private\r\n       * Description  Create the drop down menu and populate with loaded KeymanWeb keyboards\r\n       **/\r\n      createMenu() {\r\n        if(typeof(this.keyboardMenu) == 'undefined') { // I2403 - Allow toggle design to be loaded twice\r\n          this.keyboardMenu = util.createElement('ul');\r\n          this.keyboardMenu.id='KeymanWeb_KbdList';\r\n          this.keyboardMenu.className='sfunhover';\r\n        } else {\r\n          this.keyboardMenu.innerHTML = '';  // I2403 - Allow toggle design to be loaded twice\r\n        }\r\n\r\n        const _li = util.createElement('li');\r\n        const _a = util.createElement('a');\r\n        _a.innerHTML='(System keyboard)';\r\n        _a.href=\"#\";\r\n        _a.onclick = () => {\r\n          return this.selectKbd(-1);\r\n        };\r\n        _a.id='KMWSel_$';\r\n        _a.className='selected';\r\n        _li.appendChild(_a);\r\n\r\n        this.selectedMenuItem=_a;\r\n        this.keyboardMenu.appendChild(_li);\r\n\r\n        const _kbds=keymanweb.getKeyboards(), _added: Record<string, number> = {};\r\n        this.keyboards = [];\r\n        for(let _kbd = 0; _kbd < _kbds.length; _kbd++) {\r\n          const _li1=util.createElement('li');\r\n          const _a1=util.createElement('a');\r\n          _a1.innerHTML=_kbds[_kbd].LanguageName + ' - ' + _kbds[_kbd].Name;\r\n          if(!_added[_kbds[_kbd].InternalName]) _added[_kbds[_kbd].InternalName]=0;\r\n          _added[_kbds[_kbd].InternalName]++;\r\n\r\n          const _n=_added[_kbds[_kbd].InternalName];\r\n          this.keyboards.push({_InternalName: _kbds[_kbd].InternalName, _LanguageCode:_kbds[_kbd].LanguageCode, _Index: _n});\r\n\r\n          _a1.href=\"#\";\r\n          _a1.onclick = ((x) => { return () => this.selectKbd(x); })(this.keyboards.length-1);\r\n          _a1.id='KMWSel_'+_kbds[_kbd].InternalName+'$'+_n;\r\n\r\n          _li1.appendChild(_a1);\r\n          this.keyboardMenu.appendChild(_li1);\r\n        }\r\n\r\n        //if(!ui.initialized) // I2403 - Allow toggle design to be loaded twice\r\n        if(this.keyboardMenu.parentNode != this.kbdButton.getElem()) {\r\n          this.kbdButton.getElem().appendChild(this.keyboardMenu);\r\n        }\r\n      };\r\n\r\n    }\r\n\r\n\r\n    // Actually assign our UI module to the active Keyman engine.\r\n    const ui = keymanweb.ui = new ToggleUI();\r\n\r\n    // CTRL-K_SLASH:  toggles to and from default keyboard\r\n    keymanweb.addHotKey(191, 0x20, ui.switchSingleKbd);\r\n\r\n    // SHIFT-CTRL-K_SLASH:  cycles among available keyboards in sequence\r\n    keymanweb.addHotKey(191, 0x30, ui.switchNextKbd);\r\n\r\n    // ALT-K_SLASH:  Hides the OSK\r\n    keymanweb.addHotKey(191, 0x40, ui.switchOsk);\r\n\r\n    // // Initialize after KMW is fully initialized\r\n    // keymanweb['addEventListener']('loaduserinterface', ui.initialize);\r\n\r\n    keymanweb.addEventListener('controlfocused',function(params){\r\n      ui.doFocus(params.target, true, params.activeControl);\r\n    });\r\n\r\n    keymanweb.addEventListener('controlblurred',function(params){\r\n      ui.doFocus(params.target, false, null);\r\n    });\r\n\r\n    /**\r\n     * Keyboard registration event handler\r\n     *\r\n     * Set a timer to update the UI keyboard list on timeout after each keyboard is registered,\r\n     * thus updating only once when only if multiple keyboards are registered together\r\n     */\r\n    keymanweb.addEventListener('keyboardregistered', function(p) {\r\n      ui.updateList = true;\r\n      if(ui.updateTimer) {\r\n        clearTimeout(ui.updateTimer);\r\n      }\r\n      ui.updateTimer = window.setTimeout(ui.updateKeyboardList, 200);\r\n    });\r\n\r\n\r\n    /**\r\n     * Keyboard change event handler\r\n     *\r\n     * Update menu selection and control OSK display appropriately\r\n     */\r\n    keymanweb.addEventListener('keyboardchange', function(p) {\r\n      ui.updateMenu(p.internalName, p.languageCode);\r\n    });\r\n\r\n    // but also execute here, for asynchronous UI script loading (occurring after KMW initialization)\r\n    ui.initialize();\r\n\r\n  } catch(ex){}\r\n}"
  ],
  "mappings": "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",
  "names": [
    "__awaiter",
    "thisArg",
    "_arguments",
    "P",
    "generator",
    "adopt",
    "value",
    "resolve",
    "__name",
    "reject",
    "fulfilled",
    "step",
    "e",
    "rejected",
    "result",
    "keymanweb",
    "_b",
    "util",
    "_ToggleUI",
    "newState",
    "__awaiter",
    "_v",
    "nLastKbd",
    "kbdName",
    "lgCode",
    "_kbds",
    "imgPath",
    "_kmw_ctrl_img",
    "Lki",
    "Lklc",
    "sk",
    "someElement",
    "focusing",
    "activeControl",
    "w",
    "h",
    "p",
    "x",
    "y",
    "ownerDoc",
    "osk",
    "oskPosition",
    "byUser",
    "_src",
    "_caption",
    "_selected",
    "ui",
    "_Button",
    "ss",
    "_value",
    "_elemImg",
    "__name",
    "Button",
    "v1",
    "kbdEnabledOnLoad",
    "v2",
    "oskEnabledOnLoad",
    "root",
    "_kbd",
    "_name",
    "_lgCode",
    "_k",
    "_li",
    "_a",
    "_added",
    "_li1",
    "_a1",
    "_n",
    "ToggleUI",
    "params",
    "ex"
  ]
}